<template>
  <div class="bg-transparent py-8">
    <div class="max-w-[1440px] mx-auto px-4">
      <!-- Header -->
      <div
        class="flex justify-between items-center mb-3 sm:mb-4 md:mb-5 lg:mb-8"
      >
        <h2
          class="text-white text-sm xl:text-3xl font-medium uppercase sm:capitalize"
        >
          Exclusive Games
        </h2>
        <button
          class="text-white text-sm uppercase hover:opacity-75 flex items-center justify-center space-x-2"
        >
          <span class="hidden sm:block uppercase text-sm font-normal text-white"
            >SEE ALL</span
          >
          <svg
            class="w-[18px] h-[18px] shrink-0"
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="19"
            viewBox="0 0 18 19"
            fill="none"
          >
            <path
              d="M5.04727 3.76367C5.04727 4.13867 4.91836 4.45801 4.66055 4.72168C4.40273 4.98535 4.09049 5.11719 3.72383 5.11719C3.35716 5.11719 3.04492 4.98535 2.78711 4.72168C2.5293 4.45801 2.40039 4.13867 2.40039 3.76367C2.40039 3.38867 2.5293 3.06934 2.78711 2.80566C3.04492 2.54199 3.35716 2.41016 3.72383 2.41016C4.09049 2.41016 4.40273 2.54199 4.66055 2.80566C4.91836 3.06934 5.04727 3.38867 5.04727 3.76367ZM5.04727 9.16016C5.04727 9.53516 4.91836 9.85449 4.66055 10.1182C4.40273 10.3818 4.09049 10.5137 3.72383 10.5137C3.35716 10.5137 3.04492 10.3818 2.78711 10.1182C2.5293 9.85449 2.40039 9.53516 2.40039 9.16016C2.40039 8.78516 2.5293 8.46582 2.78711 8.20215C3.04492 7.93848 3.35716 7.80664 3.72383 7.80664C4.09049 7.80664 4.40273 7.93848 4.66055 8.20215C4.91836 8.46582 5.04727 8.78516 5.04727 9.16016ZM3.72383 15.9102C4.09049 15.9102 4.40273 15.7783 4.66055 15.5146C4.91836 15.251 5.04727 14.9316 5.04727 14.5566C5.04727 14.1816 4.91836 13.8623 4.66055 13.5986C4.40273 13.335 4.09049 13.2031 3.72383 13.2031C3.35716 13.2031 3.04492 13.335 2.78711 13.5986C2.5293 13.8623 2.40039 14.1816 2.40039 14.5566C2.40039 14.9316 2.5293 15.251 2.78711 15.5146C3.04492 15.7783 3.35716 15.9102 3.72383 15.9102ZM10.3238 3.76367C10.3238 4.13867 10.1949 4.45801 9.93711 4.72168C9.6793 4.98535 9.36706 5.11719 9.00039 5.11719C8.63372 5.11719 8.32148 4.98535 8.06367 4.72168C7.80586 4.45801 7.67695 4.13867 7.67695 3.76367C7.67695 3.38867 7.80586 3.06934 8.06367 2.80566C8.32148 2.54199 8.63372 2.41016 9.00039 2.41016C9.36706 2.41016 9.6793 2.54199 9.93711 2.80566C10.1949 3.06934 10.3238 3.38867 10.3238 3.76367ZM9.00039 10.5137C9.36706 10.5137 9.6793 10.3818 9.93711 10.1182C10.1949 9.85449 10.3238 9.53516 10.3238 9.16016C10.3238 8.78516 10.1949 8.46582 9.93711 8.20215C9.6793 7.93848 9.36706 7.80664 9.00039 7.80664C8.63372 7.80664 8.32148 7.93848 8.06367 8.20215C7.80586 8.46582 7.67695 8.78516 7.67695 9.16016C7.67695 9.53516 7.80586 9.85449 8.06367 10.1182C8.32148 10.3818 8.63372 10.5137 9.00039 10.5137ZM10.3238 14.5566C10.3238 14.9316 10.1949 15.251 9.93711 15.5146C9.6793 15.7783 9.36706 15.9102 9.00039 15.9102C8.63372 15.9102 8.32148 15.7783 8.06367 15.5146C7.80586 15.251 7.67695 14.9316 7.67695 14.5566C7.67695 14.1816 7.80586 13.8623 8.06367 13.5986C8.32148 13.335 8.63372 13.2031 9.00039 13.2031C9.36706 13.2031 9.6793 13.335 9.93711 13.5986C10.1949 13.8623 10.3238 14.1816 10.3238 14.5566ZM14.277 5.11719C14.6436 5.11719 14.9559 4.98535 15.2137 4.72168C15.4715 4.45801 15.6004 4.13867 15.6004 3.76367C15.6004 3.38867 15.4715 3.06934 15.2137 2.80566C14.9559 2.54199 14.6436 2.41016 14.277 2.41016C13.9103 2.41016 13.598 2.54199 13.3402 2.80566C13.0824 3.06934 12.9535 3.38867 12.9535 3.76367C12.9535 4.13867 13.0824 4.45801 13.3402 4.72168C13.598 4.98535 13.9103 5.11719 14.277 5.11719ZM15.6004 9.16016C15.6004 9.53516 15.4715 9.85449 15.2137 10.1182C14.9559 10.3818 14.6436 10.5137 14.277 10.5137C13.9103 10.5137 13.598 10.3818 13.3402 10.1182C13.0824 9.85449 12.9535 9.53516 12.9535 9.16016C12.9535 8.78516 13.0824 8.46582 13.3402 8.20215C13.598 7.93848 13.9103 7.80664 14.277 7.80664C14.6436 7.80664 14.9559 7.93848 15.2137 8.20215C15.4715 8.46582 15.6004 8.78516 15.6004 9.16016ZM14.277 15.9102C14.6436 15.9102 14.9559 15.7783 15.2137 15.5146C15.4715 15.251 15.6004 14.9316 15.6004 14.5566C15.6004 14.1816 15.4715 13.8623 15.2137 13.5986C14.9559 13.335 14.6436 13.2031 14.277 13.2031C13.9103 13.2031 13.598 13.335 13.3402 13.5986C13.0824 13.8623 12.9535 14.1816 12.9535 14.5566C12.9535 14.9316 13.0824 15.251 13.3402 15.5146C13.598 15.7783 13.9103 15.9102 14.277 15.9102Z"
              fill="white"
            />
          </svg>
        </button>
      </div>

      <!-- Horizontal Scroll -->
      <div
        ref="scrollContainer"
        class="relative flex gap-3 sm:gap-4 overflow-x-auto no-scrollbar cursor-grab active:cursor-grabbing"
        @mousedown="handleMouseDown"
        @mousemove="handleMouseMove"
        @mouseup="handleMouseUp"
        @mouseleave="handleMouseUp"
        @touchstart="handleTouchStart"
        @touchmove="handleTouchMove"
        @touchend="handleTouchEnd"
      >
        <div
          v-for="{ id, badge, title, image } in games"
          :key="id"
          class="relative w-[120px] h-40 lg:w-[156px] lg:h-[210px] bg-[#0e2343] rounded-xl flex-shrink-0"
        >
          <img
            :src="image"
            :alt="title"
            class="w-full h-full object-contain select-none"
          />

          <div
            v-if="!!badge"
            class="bg-transparent w-9 h-5 absolute top-3 lg:top-4 -left-[3px]"
          >
            <Badge :type="badge" />
          </div>
          <p
            class="select-none w-full uppercase absolute text-center bottom-1.5 text-white font-medium text-[8px] leading-[8px]"
          >
            {{ title }}
          </p>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from "vue";

interface GameItem {
  title: string;
  image: string;
  badge?: "new" | "hot";
  id: string;
}

const games: GameItem[] = [
  {
    title: "100HP Gaming",
    badge: "hot",
    image: "/images/image-1.png",
    id: "game-1",
  },
  {
    title: "VeliPlay",
    badge: "hot",
    image: "/images/image-2.png",
    id: "game-2",
  },
  {
    title: "Evolution",
    badge: "new",
    image: "/images/image-3.png",
    id: "game-3",
  },
  {
    title: "VeliPlay",
    badge: "new",
    image: "/images/image-4.png",
    id: "game-4",
  },
  {
    title: "Onlyplay",
    image: "/images/image-5.png",
    id: "game-5",
  },
  {
    title: "VeliPlay",
    image: "/images/image-6.png",
    id: "game-6",
  },
  {
    title: "Veliplay",
    badge: "hot",
    image: "/images/image-7.png",
    id: "game-7",
  },
  {
    title: "Veliplay",
    image: "/images/image-8.png",
    id: "game-8",
  },
  {
    title: "Veliplay",
    image: "/images/image-9.png",
    id: "game-9",
  },
  {
    title: "Spinomenal",
    image: "/images/image-10.png",
    id: "igame10",
  },
];

const scrollContainer = ref<HTMLElement | null>(null);
let isDown = false;
let startX = 0;
let scrollLeft = 0;

const handleMouseDown = (e: MouseEvent) => {
  isDown = true;
  startX = e.pageX - (scrollContainer.value?.offsetLeft || 0);
  scrollLeft = scrollContainer.value?.scrollLeft || 0;
};

const handleMouseMove = (e: MouseEvent) => {
  if (!isDown || !scrollContainer.value) return;
  e.preventDefault();
  const x = e.pageX - scrollContainer.value.offsetLeft;
  const walk = (x - startX) * 1.5;
  scrollContainer.value.scrollLeft = scrollLeft - walk;
};

const handleMouseUp = () => {
  isDown = false;
};

const handleTouchStart = (e: TouchEvent) => {
  isDown = true;
  startX = e.touches[0].pageX - (scrollContainer.value?.offsetLeft || 0);
  scrollLeft = scrollContainer.value?.scrollLeft || 0;
};

const handleTouchMove = (e: TouchEvent) => {
  if (!isDown || !scrollContainer.value) return;
  const x = e.touches[0].pageX - scrollContainer.value.offsetLeft;
  const walk = (x - startX) * 1.5;
  scrollContainer.value.scrollLeft = scrollLeft - walk;
};

const handleTouchEnd = () => {
  isDown = false;
};
</script>

<style scoped>
.no-scrollbar::-webkit-scrollbar {
  display: none;
}
.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.triangle-corner {
  width: 0;
  height: 0;
  border-left: 10px solid transparent; /* Màu xanh lá */
  border-bottom: 10px solid transparent;
  border-top: 10px solid #22c55e;
  border-right: 10px solid #22c55e;
  display: inline-block;
}
</style>
